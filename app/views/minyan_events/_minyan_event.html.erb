    <li>
      <% isOwner = (minyan_event.minyan.owner == current_user) %>
      <%= minyan_event.date %>
        <ul id="rsvp_list<%=minyan_event.id%>">
          <%= render minyan_event.rsvps %>
        </ul>
      <% if isOwner %>
        <%= link_to "Delete Event",
                  [minyan_event.minyan, minyan_event],
                  method: :delete,
                  data: { confirm: "Are you sure?" } %>
      <% end %>
      <!-- Show attend link if not currently attending, cancel link otherwise
           but do neither if not logged in.
      -->
      <% if current_user && minyan_event.in_attendance(current_user) %>
        <%= link_to "Cancel Attendence",
              minyan_minyan_event_cancel_path(minyan_event.minyan, minyan_event),
              method: :post %>
      <% elsif current_user %>
        <%= link_to "Attend Event",
              minyan_minyan_event_attend_path(minyan_event.minyan, minyan_event),
              method: :post %>
      <% end %>
      <!--
        Start adding new attendeed
        http://blog.brettjackson.org/post/55134095666/autocomplete-in-rails-with-typeahead-js
      -->
      <% if isOwner %>
      <%= form_tag minyan_minyan_event_add_rsvp_path(minyan_event.minyan, minyan_event),
                method: :post, remote: :true do %>
        <!-- Set by the onSelected callback for the typeahead JS object below. -->
        <%= hidden_field_tag "yid_id" %>
        <input class='typeahead' type='text' id='yidTypeAhead<%= minyan_event.id%>'
          autocomplete='off'/>
          <!-- Need to work out how to move this out of being repeated for each item -->
          <script type='text/javascript'>
            $('#yidTypeAhead<%= minyan_event.id%>').typeahead([{
              name: 'yid<%= minyan_event.id %>',
              valueKey: 'name',
              remote: {url: '/yid/suggest/<%= minyan_event.id %>/%QUERY.json',
                       cache: false},
              template: formatYid
            }]).on('typeahead:selected', onSelected);
            function onSelected($e, datum) {
              console.log("Selected");
              console.log(datum);
              console.log (this.form.elements);
              var yidField = this.form.elements['yid_id'];
              console.log(datum.id);
              yidField.value = datum.id;
            }
            function formatYid(datum) {
              return datum.name + " | " + datum.email + " | " + datum.phone;
            }
          </script>

          <%= submit_tag %>
          <% end %> <!-- isOwner -->
      <% end %> <!-- End for form -->
